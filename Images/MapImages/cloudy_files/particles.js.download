/*! */
W.define("oldAnimation",["store"],function(t){var i,s,q=null,x=null,W=null,e=!1,r="off"===t.get("particlesAnim");function a(){cancelAnimationFrame(W)}function n(t){if(t?i=t:t=i,s=t.canvas,cancelAnimationFrame(W),!r){var C=s.getContext("2d"),e=t.partObj,T=t.width,F=t.height,O=t.vectors,R=0|e.getAmount.call(e,t);(!q||q.length<3*R)&&(q=new Float32Array(3*R),x=new Float32Array(3*R));var k=e.getMaxAge(),V="wavecle"===e.animation,G=e.getStyles.call(e,t);C.clearRect(0,0,t.width,t.height);for(var L=function(a,n,i){return function(t){var e=q;e[t++]=Math.random()*a,e[t++]=Math.random()*n,e[t++]=0,e[t++]=0,e[t++]=Math.floor(Math.random()*i),e[t]=0}}(T,F,k),a=0,n=0;a<R;a++,n+=6)L(n);C.lineWidth=e.getLineWidth.call(e,t),C.fillStyle="rgba(0, 0, 0,"+e.getBlendingAlpha.call(e,t)+")";var S=e.getIntensityFun.call(e,t),j=0;!function t(e){if(W=requestAnimationFrame(t),!(e-j<35)){j=e;var a,n,i,s,r,o,l,c,h,f=C,d=q,u=x,m=6*R|0,g=O,p=0|T,v=0|Math.ceil(T/2),y=0|F,P=G,b=k,M=0,A=0,w=0;if(V)for(M=0;M<m;M+=6)d[M+4]>b&&L(M),a=d[M],n=d[M+1],w=3*(Math.round(.5*n)*v+Math.round(.5*a)),p<a||y<n||a<0||n<0?(d[M+4]=b+1,u[M+5]=10):(r=a+(i=g[w]),o=n+(s=g[w+1]),d[M]=r,d[M+1]=o,d[M+4]++,c=i/(l=Math.sqrt(i*i+s*s)/2.5),h=s/l,u[M]=a-h,u[M+1]=n+c,u[M+2]=a+h,u[M+3]=n-c,u[M+5]=S(d[M+4]));else for(M=0;M<m;M+=6)d[M+4]>b&&L(M),a=d[M],n=d[M+1],w=3*(Math.round(.5*n)*v+Math.round(.5*a)),p<a||y<n||a<0||n<0?(d[M+4]=b+1,d[M+5]=10):(d[M+2]=a+g[w],d[M+3]=n+g[w+1],d[M+4]++,d[M+5]=g[w+2]);if(f.globalCompositeOperation="destination-in",f.fillRect(0,0,T,F),f.globalCompositeOperation="source-over",V)for(M=0;M<4;M++){for(f.beginPath(),f.strokeStyle=P[M],A=0;A<m;A+=6)u[A+5]===M&&(f.moveTo(u[A],u[A+1]),f.lineTo(u[A+2],u[A+3]));f.stroke()}else for(M=0;M<4;M++){for(f.beginPath(),f.strokeStyle=P[M],A=0;A<m;A+=6)d[A+5]===M&&(f.moveTo(d[A],d[A+1]),f.lineTo(d[A+2],d[A+3]),d[A]=d[A+2],d[A+1]=d[A+3]);f.stroke()}}}()}}return{suspend:function(){e=!0,a(),s.getContext("2d").clearRect(0,0,s.width,s.height)},enable:function(){e=!1},run:n,stop:a,toggle:function(t){"off"===t?(r=!0,s.style.opacity=0,a()):r&&(r=!1,s.style.opacity=1,n(),e||n())}}}),
/*! */
W.define("particlesOld",["oldAnimation","map","store","render","particles","utils","DataTiler"],function(at,e,a,nt,n,i,t){var it=new L.CanvasLayer({disableAutoReset:!0}),st=[];var s=t.instance({cancelRqstd:!1,latestParams:null,enabled:!0,cancelTasks:function(){this.syncCounter++},tilesReady:function(t,e,a){i.include(e,a),e.partObj=n[a.particlesIdent],this.computeVectors(e,t)},redrawVectors:function(){this.mapMoved=!0,this.latestParams&&this.getTiles(this.latestParams)},init:function(t){this.latestParams=i.clone(t),this.redrawVectors()},paramsChanged:function(t){this.latestParams&&this.latestParams.fullPath===t.fullPath&&this.latestParams.overlay===t.overlay||(this.latestParams=i.clone(t),this.getTiles(this.latestParams))},computeVectors:function(t,e){var a=this.shift,n=this.lShift,i=this.offsetX,s=this.offsetY,r=this.trans,o=this.trans*this.trans,l=!1;this.latestParams.JPGtransparency?l=nt.testJPGtransparency:this.latestParams.PNGtransparency&&(l=nt.testPNGtransparency);var c,h,f,d,u,m,g,p,v,y,P=!1,b=this.w,M=0,A=0,w=0,C=0|t.height,T=0|t.width,F=0|Math.ceil(T/2),O=function(t,e){var a=3*(t>>1)*(10+(e>>1));return st.length>=a?st:st=new Float32Array(a)}(T,C),R=0,k=0,V=0,G=0,L=this.offset,S=256,j=0,q=0,x=0,W=0,I=0,J=0,N=0,B=0,D=0,X=0,Y=0,z=0,E=0,H=0,K=0,Q=0,U=0,Z=0,$=t.partObj.getVelocityFun(t),_=t.partObj.getIntensityFun(),tt=0;A=0,W=s;for(var et=e.length;A<C;){for(J=(q=W>>a)-((G=q>>8)<<8),B=W-(q<<a),P=G<0&&et<=G,w=0,x=i;w<T;w+=2,x+=2)N=x-((j=x>>a)<<a),0<=G&&G<et?S!==j&&(I=j-((V=j>>8)<<8),(c=e[G][V])?(h=c.data,R=L+I+((J<<8)+J)<<2,l&&(P=l(h,R)),D=h[R],X=h[R+4],E=h[R+1],H=h[R+5],Y=h[R+=1028],z=h[R+4],K=h[R+1],Q=h[R+5]):P=!0,S=j):P=!0,P?(O[k++]=0,O[k++]=0,O[k++]=0):(Z=b?(U=D*b[M=N+(B<<a)<<2]+X*b[M+1]+Y*b[M+2]+z*b[M+3]>>n,E*b[M]+H*b[M+1]+K*b[M+2]+Q*b[M+3]>>n):(U=(D*(m=(r-B)*(r-N))+X*(g=(r-B)*N)+Y*(p=B*(r-N))+z*(v=N*B))/o,(E*m+H*g+K*p+Q*v)/o),f=c.decodeR(U),d=c.decodeG(Z),y=$(u=Math.sqrt(f*f+d*d)),O[k++]=f*y,O[k++]=d*-y,O[k++]=_(u),tt+=u);W+=2,k=3*((A+=2)>>1)*F}this.mapMoved&&(it.reset.call(it),this.mapMoved=!1),t.speed2pixel=tt/(T*C),t.vectors=O,t.canvas=it.getCanvas(),at.run(t),nt.emit("rendered","particles")}}),r=s.redrawVectors.bind(s),o=s.cancelTasks.bind(s);function l(t){t?r():o()}return{open:function(t){it.addTo(e),it.getCanvas().classList.add("particles-layer"),e.on("moveend",r),e.on("movestart",o),a.on("particlesAnim",at.toggle),a.on("visibility",l),at.enable(),s.init(t)},close:function(){at.suspend(),a.off("particlesAnim",at.toggle),a.off("visibility",l),e.off("moveend",r),e.off("movestart",o),e.removeLayer(it)},redraw:r,paramsChanged:s.paramsChanged.bind(s)}});